<h2><%= @post.title %></h2>
<p><%= simple_format(@post.body) %></p>
<p><a href="<%= edit_post_path(@post) %>">Edit</a> |
   <a href="<%= posts_path %>">Back to posts</a></p>

<hr>
<h3>Comments</h3>

<% @post.comments.order(created_at: :asc).each do |c| %>
  <div style="border:1px dashed #ccc; padding:6px; margin-bottom:6px;">
    <p><%= c.body %></p>
    <small><%= c.created_at.strftime("%Y-%m-%d %H:%M") %></small>
    <form action="<%= post_comment_path(@post, c) %>" method="post" style="display:inline;">
      <input type="hidden" name="_method" value="delete">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <button type="submit">Delete</button>
    </form>
  </div>
<% end %>

<h4>Add a comment</h4>
<%= form_with(model: [@post, @comment], local: true) do |f| %>
  <div>
    <%= f.label :body %><br>
    <%= f.text_area :body, rows: 3 %>
  </div>
  <div>
    <%= f.submit "Add Comment" %>
  </div>
<% end %>
